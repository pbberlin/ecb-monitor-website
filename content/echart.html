<!DOCTYPE html>
<html lang="en" style="height: 100%">

<head>
  <meta charset="utf-8">
</head>

<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%"></div>

  <script type="text/javascript"
    src="https://echarts.apache.org/en/js/vendors/jquery@3.7.1/dist/jquery.min.js"></script>

  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>


  <!-- Uncomment this line if you want to dataTool extension -->
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@6/dist/extension/dataTool.min.js"></script>

  <!-- Uncomment this line if you want to use gl extension -->
  <!-- <script type="text/javascript"  src="https://echarts.apache.org/en/js/vendors/echarts-gl/dist/echarts-gl.min.js"></script> -->
  
  <!-- Uncomment this line if you want to echarts-stat extension -->
  <script type="text/javascript" src="https://echarts.apache.org/en/js/vendors/echarts-stat/dist/ecStat.min.js"></script>

  <!-- Uncomment this line if you want to echarts-graph-modularity extension -->
  <script type="text/javascript"  src="https://echarts.apache.org/en/js/vendors/echarts-graph-modularity/dist/echarts-graph-modularity.min.js"></script>


  <!-- Uncomment this line if you want to use map -->
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>


  <!-- Uncomment these two lines if you want to use bmap extension -->
  <!-- <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script> -->
  <!-- <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@6/dist/extension/bmap.min.js"></script> -->

  <script type="text/javascript">
    var dom = document.getElementById('container');

    var myChart = echarts.init(dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });


    function randomPieSeries1(center, radius) {
      const data = ['A', 'B', 'C', 'D'].map((t) => {
        return {
          value: Math.round(Math.random() * 100),
          name: 'Category ' + t
        };
      }); // map
      return {
        type: 'pie',
        coordinateSystem: 'geo',
        tooltip: {
          formatter: '{b}: {c} ({d}%)'
        },
        label: {
          show: false
        },
        labelLine: {
          show: false
        },
        animationDuration: 0,
        radius,
        center,
        data
      };
    }

    var app = {};
    var ROOT_PATH = 'http://localhost:5000';
    var option;


    // $.get(ROOT_PATH + '/static/echart/HK.json',        function (geoJSON) {  console.log("fine hk") })
    // $.get(ROOT_PATH + '/static/echart/USA.json',       function (geoJSON) {  console.log("fine us") })
    // $.get(ROOT_PATH + '/static/echart/europe.geojson', function (geoJSON) {  console.log("fine eu") })

    myChart.showLoading();


    $.get(ROOT_PATH + '/static/echart/europe-reduced.geojson', function (geoJSON) {
      echarts.registerMap('europe-reduced', geoJSON);
      console.log("fine 3")

      // function randomPieSeries2(center, radius){
      // };

      option = {
        geo: {
          map: 'europe-reduced',
          roam: true,
          aspectScale: Math.cos((65 * Math.PI) / 180),
          aspectScale: Math.cos((55 * Math.PI) / 180),
          // nameProperty: 'name_en', // If using en name.
          itemStyle: {
            areaColor: '#e7e8ea'
          },
          emphasis: {
            label: { show: false }
          }
        },
        tooltip: {},
        legend:  {},
        series: [
          randomPieSeries1([-19.007740346534653, 64.17802815851280], 45),
          randomPieSeries1([-17.204666089108912, 65.44804833928391], 25),
          randomPieSeries1([-15.264995297029705, 64.85922080092640], 30),

          // use geo region name as center  
          // randomPieSeries1('Höfuðborgarsvæði',30),
          randomPieSeries1([-20, 65.8],30),
          randomPieSeries1('France' ,30),
          randomPieSeries1('Germany',25),
        ]
      };

        myChart.hideLoading();
        myChart.setOption(option);
        console.log("fine 4")

    });


    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);


  </script>


</body>

</html>